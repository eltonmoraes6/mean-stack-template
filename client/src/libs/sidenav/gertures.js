!function(a){function b(a,b,c){a in i||(i[a]={name:a,declarative:!0,deps:b,declare:c,normalizedDeps:b})}function c(a){return n[a]||(n[a]={name:a,dependencies:[],exports:{},importers:[]})}function d(b){if(!b.module){var e=b.module=c(b.name),f=b.module.exports,g=b.declare.call(a,function(a,b){if(e.locked=!0,"object"==typeof a)for(var c in a)f[c]=a[c];else f[a]=b;for(var d=0,g=e.importers.length;g>d;d++){var h=e.importers[d];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===e&&h.setters[i](f)}return e.locked=!1,b},b.name);e.setters=g.setters,e.execute=g.execute;for(var j=0,k=b.normalizedDeps.length;k>j;j++){var l,m=b.normalizedDeps[j],o=i[m],p=n[m];p?l=p.exports:o&&!o.declarative?l=o.esModule:o?(d(o),p=o.module,l=p.exports):l=h(m),p&&p.importers?(p.importers.push(e),e.dependencies.push(p)):e.dependencies.push(null),e.setters[j]&&e.setters[j](l)}}}function e(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(k)for(var d in b)"default"!==d&&f(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c["default"]=b,m(c,"__useDefault",{value:!0}),c}function f(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&m(a,c,d)}catch(e){return a[c]=b[c],!1}}function g(b,c){var d=i[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var k=d.normalizedDeps[e];-1==j.call(c,k)&&(i[k]?g(k,c):h(k))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function h(a){if(p[a])return p[a];if("@node/"==a.substr(0,6))return o(a.substr(6));var b=i[a];if(!b)throw"Module "+a+" not present.";return d(i[a]),g(a,[]),i[a]=void 0,b.declarative&&m(b.module.exports,"__esModule",{value:!0}),p[a]=b.declarative?b.module.exports:b.esModule}var i={},j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},k=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(l){k=!1}var m;!function(){try{Object.defineProperty({},"a",{})&&(m=Object.defineProperty)}catch(a){m=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(d){}}}}();var n={},o="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,p={"@empty":{}};return function(a,c,d,f){return function(g){g(function(g){for(var i=0;i<c.length;i++)(function(a,b){b&&b.__esModule?p[a]=b:p[a]=e(b)})(c[i],arguments[i]);f({register:b});var j=h(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)h(a[i]);return d?j["default"]:j})}}}("undefined"!=typeof self?self:global)(["1"],[],!0,function(a){this.require,this.exports,this.module;a.register("2",["3"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.Gestures}],execute:function(){c.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){c.untrackDocument(this.info)},mousedown:function(a){var b=this;if(c.hasLeftMouseButton(a)){var d=a.target,e=function(a){c.hasLeftMouseButton(a)||(b.fire("up",d,a),c.untrackDocument(b.info))},f=function(e){c.hasLeftMouseButton(e)&&b.fire("up",d,a),c.untrackDocument(b.info)};c.trackDocument(this.info,e,f),this.fire("down",d,a)}},touchstart:function(a){this.fire("down",a.target,a.changedTouches[0])},touchend:function(a){this.fire("up",a.target,a.changedTouches[0])},fire:function(a,b,d){c.fire(b,a,{x:d.clientX,y:d.clientY,sourceEvent:d,prevent:function(a){return c.prevent(a)}})}})}}}),a.register("4",["3"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.Gestures}],execute:function(){d=350,e=void 0,c.register({name:"hold",deps:["mousedown","touchstart"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["hold"],info:{movefn:null,upfn:null},reset:function(){c.untrackDocument(this.info)},onDown:function(a){var b=this,f=a.target,g=function(){clearTimeout(e),c.untrackDocument(b.info)},h=function(){clearTimeout(e),c.untrackDocument(b.info)};c.trackDocument(this.info,g,h),e=window.setTimeout(function(){b.prevent("tap"),b.fire("hold",f,a)},c.holdTimeout||d)},mousedown:function(a){c.hasLeftMouseButton(a)&&this.onDown(a)},touchstart:function(a){this.onDown(a)},fire:function(a,b,e){c.fire(b,a,{x:e.clientX,y:e.clientY,timeout:d,sourceEvent:e,prevent:function(a){return c.prevent(a)}})}})}}}),a.register("5",["3"],function(a,b){"use strict";function c(a){if("click"===a.type){if(0===a.detail)return!0;var b=a.target,c=b.getBoundingClientRect(),d=a.pageX,e=a.pageY;return!(d>=c.left&&d<=c.right&&e>=c.top&&e<=c.bottom)}return!1}var d,e;return{setters:[function(a){d=a.Gestures}],execute:function(){e=25,d.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(a){this.info.x=a.clientX,this.info.y=a.clientY},mousedown:function(a){d.hasLeftMouseButton(a)&&this.save(a)},click:function(a){d.hasLeftMouseButton(a)&&this.forward(a)},touchstart:function(a){this.save(a.changedTouches[0])},touchend:function(a){this.forward(a.changedTouches[0])},forward:function(a){var b=Math.abs(a.clientX-this.info.x),f=Math.abs(a.clientY-this.info.y),g=a.target,h=d.tapSensibility||e;(isNaN(b)||isNaN(f)||h>=b&&h>=f||c(a))&&(this.info.prevent||d.fire(g,"tap",{x:a.clientX,y:a.clientY,sourceEvent:a}))}})}}}),a.register("6",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")})}}}),a.register("7",[],function(a,b){"use strict";function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return a("default",function(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}),{setters:[],execute:function(){}}}),a.register("3",["6","7"],function(a,b){"use strict";function c(a){for(var b=[],c=a.target;c;)b.push(c),c=c.parentNode;return b}function d(a){if(a[l]={skip:!0},"click"===a.type){for(var b=c(a),d=0;d<b.length;d++)if(b[d]===r.mouse.target)return;a.preventDefault(),a.stopPropagation()}}function e(a){for(var b=0,c=o.length;c>b;b++){var e=o[b];a?document.addEventListener(e,d,!0):document.removeEventListener(e,d,!0)}}function f(){if(!q){r.mouse.mouseIgnoreJob||e(!0);var a=function(){e(),r.mouse.target=null,r.mouse.mouseIgnoreJob=null};r.mouse.mouseIgnoreJob=!0,window.setTimeout(a,n)}}function g(a){for(var b=c(a),d="auto",e=0,f=b.length;f>e;e++){var g=b[e];if(g[m]){d=g[m];break}}return d}var h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){h=a["default"]},function(a){i=a["default"]}],execute:function(){j="string"==typeof document.head.style.touchAction,k="__Gestures",l="__GesturesHandled",m="__GesturesTouchAction",n=2500,o=["mousedown","mousemove","mouseup","click"],p=[0,1,4,2],q=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),r={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}},a("Gestures",s=function(){function a(){h(this,a)}return i(a,null,[{key:"handleNative",value:function(b){var c=void 0,d=b.type,e=b.currentTarget,g=e[k];if(g){var h=g[d];if(h){if(!b[l]&&(b[l]={},"touch"===d.slice(0,5))){var i=b.changedTouches[0];if("touchstart"===d&&1===b.touches.length&&(r.touch.id=i.identifier),r.touch.id!==i.identifier)return;j||"touchstart"!==d&&"touchmove"!==d||this.handleTouchAction(b),"touchend"===d&&(r.mouse.target=b.currentTarget||b.target,f(!0))}if(c=b[l],!c.skip){for(var m=a.recognizers,n=0,o=m.length;o>n;n++){var p=m[n];h[p.name]&&!c[p.name]&&p.flow&&p.flow.start.indexOf(b.type)>-1&&p.reset&&p.reset()}for(var n=0,o=m.length;o>n;n++){var p=m[n];h[p.name]&&!c[p.name]&&(c[p.name]=!0,p[d](b))}}}}}},{key:"handleTouchAction",value:function(a){var b=a.changedTouches[0],c=a.type;if("touchstart"===c)r.touch.x=b.clientX,r.touch.y=b.clientY,r.touch.scrollDecided=!1;else if("touchmove"===c){if(r.touch.scrollDecided)return;r.touch.scrollDecided=!0;var d=g(a),e=!1,f=Math.abs(r.touch.x-b.clientX),h=Math.abs(r.touch.y-b.clientY);a.cancelable&&("none"===d?e=!0:"pan-x"===d?e=h>f:"pan-y"===d&&(e=f>h)),e?a.preventDefault():this.prevent("track")}}},{key:"bindGesture",value:function(a,b){a===document&&(a=document.documentElement);var c=this.gestures[b],d=c.deps,e=c.name,f=a[k];f||(a[k]=f={});for(var g=0,h=d.length;h>g;g++){var i=d[g];if(!(q&&o.indexOf(i)>-1)){var j=f[i];j||(f[i]=j={_count:0}),0===j._count&&a.addEventListener(i,this.handleNative),j[e]=(j[e]||0)+1,j._count=(j._count||0)+1}}return c}},{key:"addEventListener",value:function(a,b,c){a===document&&(a=document.documentElement);var d=this.bindGesture(a,b);a.addEventListener(b,c),d.touchAction&&this.setTouchAction(a,d.touchAction)}},{key:"unbindGesture",value:function(a,b){var c=this.gestures[b],d=c.deps,e=c.name,f=a[k];if(f)for(var g=0,h=d.length;h>g;g++){var i=d[g],j=f[i];j&&j[e]&&(j[e]=(j[e]||1)-1,j._count=(j._count||1)-1,0===j._count&&a.removeEventListener(i,this.handleNative))}return c}},{key:"removeEventListener",value:function(a,b,c){this.unbindGesture(a,b),a.removeEventListener(b,c)}},{key:"register",value:function(b){a.recognizers.push(b);for(var c=0,d=b.emits.length;d>c;c++)this.gestures[b.emits[c]]=b}},{key:"findRecognizerByEvent",value:function(b){for(var c=0,d=a.recognizers.length;d>c;c++)for(var e=a.recognizers[c],f=0,g=e.emits.length;g>f;f++){var h=e.emits[f];if(h===b)return e}return null}},{key:"setTouchAction",value:function(a,b){j&&(a.style.touchAction=b),a[m]=b}},{key:"fire",value:function(a,b,c){var d=document.createEvent("Event");d.initEvent(b,!0,!0);for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);if(a.dispatchEvent(d),d.defaultPrevented){var f=c.sourceEvent;f&&f.preventDefault&&f.preventDefault()}}},{key:"prevent",value:function(a){var b=this.findRecognizerByEvent(a);b.info&&(b.info.prevent=!0)}},{key:"hasLeftMouseButton",value:function(a){var b=a.type;if(-1===o.indexOf(b))return!1;if("mousemove"===b){var c=void 0===a.buttons?1:p[a.which]||0;return Boolean(1&c)}var d=void 0===a.button?0:a.button;return 0===d}},{key:"trackDocument",value:function(a,b,c){a.movefn=b,a.upfn=c,document.addEventListener("mousemove",b),document.addEventListener("mouseup",c)}},{key:"untrackDocument",value:function(a){document.removeEventListener("mousemove",a.movefn),document.removeEventListener("mouseup",a.upfn),a.movefn=null,a.upfn=null}}]),a}()),a("Gestures",s),s.gestures={},s.recognizers=[]}}}),a.register("8",["3"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.Gestures}],execute:function(){d=5,c.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(a){this.moves.length>2&&this.moves.shift(),this.moves.push(a)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,c.untrackDocument(this.info)},hasMovedEnough:function(a,b){if(this.info.prevent)return!1;if(this.info.started)return!0;var e=Math.abs(this.info.x-a),f=Math.abs(this.info.y-b),g=c.minTrackDistance||d;return e>=g||f>=g},mousedown:function(a){var b=this;if(c.hasLeftMouseButton(a)){var d=a.target,e=function(a){var e=a.clientX,f=a.clientY;b.hasMovedEnough(e,f)&&(b.info.started?"mouseup"===a.type?b.info.state="end":b.info.state="track":b.info.state="start",b.info.addMove({x:e,y:f}),c.hasLeftMouseButton(a)||(b.info.state="end",c.untrackDocument(b.info)),b.fire(d,a),b.info.started=!0)},f=function(a){b.info.started&&(c.prevent("tap"),e(a)),c.untrackDocument(b.info)};c.trackDocument(this.info,e,f),this.info.x=a.clientX,this.info.y=a.clientY}},touchstart:function(a){var b=a.changedTouches[0];this.info.x=b.clientX,this.info.y=b.clientY},touchmove:function(a){var b=a.target,c=a.changedTouches[0],d=c.clientX,e=c.clientY;this.hasMovedEnough(d,e)&&(this.info.addMove({x:d,y:e}),this.fire(b,c),this.info.state="track",this.info.started=!0)},touchend:function(a){var b=a.target,d=a.changedTouches[0];this.info.started&&(c.prevent("tap"),this.info.state="end",this.info.addMove({x:d.clientX,y:d.clientY}),this.fire(b,d))},fire:function(a,b){var d=this.info.moves[this.info.moves.length-2],e=this.info.moves[this.info.moves.length-1],f=e.x-this.info.x,g=e.y-this.info.y,h=0,i=0;return d&&(i=e.x-d.x,h=e.y-d.y),c.fire(a,"track",{state:this.info.state,x:b.clientX,y:b.clientY,dx:f,dy:g,ddx:i,ddy:h,sourceEvent:b})}})}}}),a.register("1",["2","3","4","5","8"],function(a,b){"use strict";var c;return{setters:[function(a){},function(a){c=a.Gestures},function(a){},function(a){},function(a){}],execute:function(){a("default",c)}}})})(function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=a():Gestures=a()});
//# sourceMappingURL=gestures.js.map